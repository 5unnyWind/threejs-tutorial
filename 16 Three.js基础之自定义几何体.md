# 16 Three.js基础之自定义几何体

本文说的 几何体(geometry)，也就是之前 “05 Three.js基础之图元.md” 中的 图元(primitives)。

> 图元和几何体只是同一个对象(事物)的不同的叫法而已。

自定义几何体也就相当于自定义图元。

> 自定义几何体的这个过程，在传统 3D 软件中被称为 建模



## 自定义几何体(custom geometry)概述



### 有必要在 Three.js 中自定义几何体吗？

**答：似乎没有必要，因为实际项目中，绝大多数情况下，我们都会通过专业的 3D 软件中来创建物体模型(建模)，而不是通过 Three.js 自定义建模。**

传统专业的 3D 转件包括：

1. Blender：开源免费的 3D 软件
2. Maya：侧重动画渲染的 3D 软件
3. Cinema4D(C4D)：轻量级的 3D 软件
4. 3D Sudio Max
5. ...

> 以上软件中，都有学习成本，相对而言 C4D 更加轻量、更加简单。

当 3D 模型创建好后，我们将模型导出为 gLTF 或 .obj 的文件，然后在 Three.js 中加载并使用它们。

尽管如此，但 Three.js 依然提供了自定义几何体(自定义建模)的方法。

> 可以让我们在不导入 建模文件 的前提下，通过 Three.js 来自定义几何体。

> 所有的传统 3D 软件建模过程都是可视化的，也就是说你可以时时看到物体，并且进行细微调整。而 Three.js 则是通过代码来建模的，整个建模过程是不可见的。

尽管实际中我们可能会很少机会在 Three.js 中自定义几何体，但是学习这方面的知识还是非常有必要的。



### Three.js中如何自定义几何体？

答：在 Three.js  中，一共可以有 2 种方式自定义几何体。

**第1种：继承于 Geometry**

优点：创建和使用的难度小

缺点：渲染启动速度慢、占更多内存



**第2种：继承于 BufferGeometry**

优点：渲染启动速度快、占更少内存

缺点：创建和使用的难度大



**补充说明：**

上面说的 渲染启动速度 慢，是指当场景第一次被渲染、后续修改后重新渲染的速度慢。

并不是说 绘制速度慢。

> 无论选择 Geometry 还是 BufferGeometry，绘制过程速度是相同的，他们的 “快慢” 主要体现在 第一次渲染启动速度 这方面。

当然，你不需花太多精力去理解 慢 的细节，你只需知道 Geometry 相对而言 渲染速度更慢一些即可。



**如何选择？**

答：对于要创建的自定义几何体各个面的三角形总和小于 1000，则优先选择继承于 Geometry。三角形数量超过这个范围的则推荐继承于 BufferGeometry。

事实上以上的选择仅供参考，重点是你实际项目中 是否觉得渲染启动速度、修改响应速度慢，如果慢则可进行优化改进。

> 如果由于客户端硬件配置比较高，感知不到慢或卡顿，那么可以而继续使用 Geometry。



